matrix:
  include:
    - language: scala
      scala: 2.12.5
      jdk: oraclejdk8

      # These directories are cached to S3 at the end of the build
      cache:
        directories:
          - $HOME/.ivy2/cache
          - $HOME/.sbt/boot
          - $HOME/.sbt/launchers
          - bootstrap/node_modules

      before_cache:
        # Cleanup the cached directories to avoid unnecessary cache updates
        - find $HOME/.ivy2/cache -name "ivydata-*.properties" -print -delete
        - find $HOME/.sbt        -name "*.lock"               -print -delete

      before_script: 
        - pushd .
        - cd bootstrap
        - npm install 
        - npm run ganache
        - popd
        
    - language: node_js
      node_js: v10.9.0
      before_install: cd bootstrap
      before_script: npm run ganache
      cache:
        directories:
            - bootstrap/node_modules

